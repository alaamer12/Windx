{% extends "admin/base.html.jinja" %}
{% from "components/buttons.html.jinja" import button, button_group %}

{% block title %}Documentation - WindX Admin{% endblock %}

{% block content %}
<div class="page-header">
    <h1>ğŸ“š System Documentation</h1>
    <p style="color: var(--text-light); margin-top: 0.5rem;">Complete guide to using the WindX Product Configurator</p>
</div>

<!-- Quick Navigation -->
<div class="card">
    <h2 style="margin-bottom: 1rem;">Quick Navigation</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
        <a href="#overview" style="padding: 1rem; border: 1px solid var(--border); border-radius: 0.5rem; text-decoration: none; color: var(--text); transition: all 0.2s;">
            <div style="font-weight: 600; margin-bottom: 0.25rem;">ğŸ¯ System Overview</div>
            <div style="font-size: 0.875rem; color: var(--text-light);">What is WindX and how it works</div>
        </a>
        <a href="#manufacturing" style="padding: 1rem; border: 1px solid var(--border); border-radius: 0.5rem; text-decoration: none; color: var(--text); transition: all 0.2s;">
            <div style="font-weight: 600; margin-bottom: 0.25rem;">ğŸ­ Manufacturing Types</div>
            <div style="font-size: 0.875rem; color: var(--text-light);">Product categories and setup</div>
        </a>
        <a href="#hierarchy" style="padding: 1rem; border: 1px solid var(--border); border-radius: 0.5rem; text-decoration: none; color: var(--text); transition: all 0.2s;">
            <div style="font-weight: 600; margin-bottom: 0.25rem;">ğŸŒ³ Hierarchy Editor</div>
            <div style="font-size: 0.875rem; color: var(--text-light);">Building attribute trees</div>
        </a>
        <a href="#workflow" style="padding: 1rem; border: 1px solid var(--border); border-radius: 0.5rem; text-decoration: none; color: var(--text); transition: all 0.2s;">
            <div style="font-weight: 600; margin-bottom: 0.25rem;">ğŸ”„ Workflow</div>
            <div style="font-size: 0.875rem; color: var(--text-light);">Step-by-step process</div>
        </a>
    </div>
</div>

<!-- System Overview -->
<div class="card" id="overview">
    <h2 style="margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
        ğŸ¯ System Overview
    </h2>
    
    <div style="margin-bottom: 2rem;">
        <h3 style="margin-bottom: 0.75rem;">What is WindX?</h3>
        <p style="line-height: 1.7; color: var(--text-light);">
            WindX is a powerful product configurator system that allows customers to design and customize manufactured products 
            (like windows, doors, furniture) through a dynamic, hierarchical attribute system. The system provides real-time pricing, 
            automated quote generation, and a flexible template system.
        </p>
    </div>

    <div style="margin-bottom: 2rem;">
        <h3 style="margin-bottom: 0.75rem;">Key Features</h3>
        <ul style="list-style: none; padding: 0;">
            <li style="padding: 0.75rem; background: #f8fafc; border-radius: 0.5rem; margin-bottom: 0.5rem;">
                <strong>âœ¨ Self-Service Configuration:</strong> Customers design products independently with instant pricing
            </li>
            <li style="padding: 0.75rem; background: #f8fafc; border-radius: 0.5rem; margin-bottom: 0.5rem;">
                <strong>ğŸŒ² Hierarchical Attributes:</strong> Unlimited depth attribute trees for complex products
            </li>
            <li style="padding: 0.75rem; background: #f8fafc; border-radius: 0.5rem; margin-bottom: 0.5rem;">
                <strong>ğŸ’° Real-Time Pricing:</strong> Automated price calculations with formulas
            </li>
            <li style="padding: 0.75rem; background: #f8fafc; border-radius: 0.5rem; margin-bottom: 0.5rem;">
                <strong>ğŸ“‹ Templates:</strong> Pre-defined configurations for common use cases
            </li>
            <li style="padding: 0.75rem; background: #f8fafc; border-radius: 0.5rem;">
                <strong>ğŸ“Š Quote & Order Management:</strong> Complete lifecycle tracking
            </li>
        </ul>
    </div>
</div>

<!-- Manufacturing Types -->
<div class="card" id="manufacturing">
    <h2 style="margin-bottom: 1.5rem;">ğŸ­ Manufacturing Types</h2>
    
    <div style="margin-bottom: 2rem;">
        <h3 style="margin-bottom: 0.75rem;">What are Manufacturing Types?</h3>
        <p style="line-height: 1.7; color: var(--text-light); margin-bottom: 1rem;">
            Manufacturing Types are the top-level product categories in your system (e.g., Window, Door, Table). 
            Each type has its own attribute hierarchy and base pricing.
        </p>
        
        <div style="background: #eff6ff; border-left: 4px solid var(--primary); padding: 1rem; border-radius: 0.5rem;">
            <strong>ğŸ’¡ Example:</strong> A "Window" manufacturing type might have attributes for frame material, glass type, 
            dimensions, and opening style.
        </div>
    </div>

    <div style="margin-bottom: 2rem;">
        <h3 style="margin-bottom: 0.75rem;">Creating a Manufacturing Type</h3>
        <ol style="line-height: 1.8; color: var(--text-light);">
            <li><strong>Name:</strong> Unique identifier (e.g., "Casement Window", "Entry Door")</li>
            <li><strong>Category:</strong> High-level grouping (e.g., "window", "door", "furniture")</li>
            <li><strong>Base Price:</strong> Starting price before any customizations ($)</li>
            <li><strong>Base Weight:</strong> Default weight in kilograms (kg)</li>
            <li><strong>Description:</strong> Detailed explanation of the product type</li>
            <li><strong>Active:</strong> Whether this product type is available to customers</li>
        </ol>
    </div>
</div>

<!-- Hierarchy Editor -->
<div class="card" id="hierarchy">
    <h2 style="margin-bottom: 1.5rem;">ğŸŒ³ Hierarchy Editor - Complete Guide</h2>
    
    <div style="margin-bottom: 2rem;">
        <h3 style="margin-bottom: 0.75rem;">Understanding the Hierarchy</h3>
        <p style="line-height: 1.7; color: var(--text-light); margin-bottom: 1rem;">
            The attribute hierarchy is a tree structure where each node represents a configurable aspect of your product. 
            Think of it like a family tree, but for product options.
        </p>
        
        <div style="background: #f0fdf4; border-left: 4px solid var(--success); padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem;">
            <strong>ğŸŒ² Tree Structure Example:</strong><br>
            <code style="display: block; margin-top: 0.5rem; font-family: monospace; font-size: 0.875rem;">
                Window (Root)<br>
                â”œâ”€â”€ Frame Material (Category)<br>
                â”‚   â”œâ”€â”€ Material Type (Attribute)<br>
                â”‚   â”‚   â”œâ”€â”€ Aluminum (Option) [+$50]<br>
                â”‚   â”‚   â”œâ”€â”€ Wood (Option) [+$120]<br>
                â”‚   â”‚   â””â”€â”€ Vinyl (Option) [+$30]<br>
                â”‚   â””â”€â”€ Frame Color (Attribute)<br>
                â”‚       â”œâ”€â”€ Natural Oak (Option) [+$25]<br>
                â”‚       â””â”€â”€ White Paint (Option) [+$15]<br>
                â””â”€â”€ Glass Type (Category)<br>
                    â””â”€â”€ Pane Count (Attribute)<br>
                        â”œâ”€â”€ Single Pane (Option) [+$0]<br>
                        â””â”€â”€ Double Pane (Option) [+$80]
            </code>
        </div>
    </div>

    <div style="margin-bottom: 2rem;">
        <h3 style="margin-bottom: 1rem;">Node Types Explained</h3>
        
        <div style="display: grid; gap: 1rem;">
            <div style="border: 1px solid var(--border); border-radius: 0.5rem; padding: 1rem;">
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                    <span style="background: #dbeafe; color: #1e40af; padding: 0.25rem 0.75rem; border-radius: 1rem; font-size: 0.875rem; font-weight: 600;">CATEGORY</span>
                    <strong>Organizational Grouping</strong>
                </div>
                <p style="color: var(--text-light); margin-bottom: 0.5rem;">
                    Used to organize related attributes together. Has no direct value but contains other nodes.
                </p>
                <div style="background: #f8fafc; padding: 0.75rem; border-radius: 0.375rem; font-size: 0.875rem;">
                    <strong>Example:</strong> "Frame Material", "Glass Type", "Dimensions"
                </div>
            </div>

            <div style="border: 1px solid var(--border); border-radius: 0.5rem; padding: 1rem;">
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                    <span style="background: #dcfce7; color: #166534; padding: 0.25rem 0.75rem; border-radius: 1rem; font-size: 0.875rem; font-weight: 600;">ATTRIBUTE</span>
                    <strong>Configurable Property</strong>
                </div>
                <p style="color: var(--text-light); margin-bottom: 0.5rem;">
                    A specific property that customers can configure. Has a data type and may have validation rules.
                </p>
                <div style="background: #f8fafc; padding: 0.75rem; border-radius: 0.375rem; font-size: 0.875rem;">
                    <strong>Example:</strong> "Material Type", "Width", "Opening Style"
                </div>
            </div>

            <div style="border: 1px solid var(--border); border-radius: 0.5rem; padding: 1rem;">
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                    <span style="background: #fef3c7; color: #92400e; padding: 0.25rem 0.75rem; border-radius: 1rem; font-size: 0.875rem; font-weight: 600;">OPTION</span>
                    <strong>Specific Choice</strong>
                </div>
                <p style="color: var(--text-light); margin-bottom: 0.5rem;">
                    A specific choice for an attribute. Has a price impact and may trigger conditional display of other attributes.
                </p>
                <div style="background: #f8fafc; padding: 0.75rem; border-radius: 0.375rem; font-size: 0.875rem;">
                    <strong>Example:</strong> "Aluminum", "Wood", "Vinyl" (for Material Type attribute)
                </div>
            </div>
        </div>
    </div>

    <div style="margin-bottom: 2rem;">
        <h3 style="margin-bottom: 1rem;">Key Concepts</h3>
        
        <div style="display: grid; gap: 1rem;">
            <div style="background: #fef9c3; border-left: 4px solid #eab308; padding: 1rem; border-radius: 0.5rem;">
                <strong>ğŸŒ± Root Node:</strong> The first node in your hierarchy. Usually represents the main product category. 
                Leave "Parent Node" empty when creating a root node.
            </div>

            <div style="background: #e0e7ff; border-left: 4px solid #6366f1; padding: 1rem; border-radius: 0.5rem;">
                <strong>ğŸ‘¨â€ğŸ‘¦ Parent Node:</strong> The node that contains this node. Creates the tree structure. 
                Path shows full hierarchy (e.g., "Frame > Material > Aluminum").
            </div>

            <div style="background: #fce7f3; border-left: 4px solid #ec4899; padding: 1rem; border-radius: 0.5rem;">
                <strong>ğŸ“Š Data Type:</strong> What kind of value this attribute stores:
                <ul style="margin-top: 0.5rem; margin-left: 1.5rem;">
                    <li><strong>String:</strong> Text values (e.g., color names)</li>
                    <li><strong>Number:</strong> Numeric values (e.g., dimensions)</li>
                    <li><strong>Boolean:</strong> Yes/No choices</li>
                    <li><strong>Formula:</strong> Calculated values based on other selections</li>
                </ul>
            </div>

            <div style="background: #d1fae5; border-left: 4px solid #10b981; padding: 1rem; border-radius: 0.5rem;">
                <strong>ğŸ”¢ Sort Order:</strong> Controls the display order. Lower numbers appear first. 
                Use increments of 10 (10, 20, 30) to allow easy insertion later.
            </div>

            <div style="background: #dbeafe; border-left: 4px solid #3b82f6; padding: 1rem; border-radius: 0.5rem;">
                <strong>âœ… Required Field:</strong> If checked, customers must provide a value for this attribute 
                before they can proceed with their configuration.
            </div>
        </div>
    </div>
</div>

<!-- Workflow -->
<div class="card" id="workflow">
    <h2 style="margin-bottom: 1.5rem;">ğŸ”„ Complete Workflow</h2>
    
    <div style="margin-bottom: 2rem;">
        <h3 style="margin-bottom: 1rem;">Step-by-Step Process</h3>
        
        <div style="display: grid; gap: 1.5rem;">
            <div style="display: flex; gap: 1rem;">
                <div style="flex-shrink: 0; width: 2.5rem; height: 2.5rem; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700;">1</div>
                <div>
                    <h4 style="margin-bottom: 0.5rem;">Create Manufacturing Type</h4>
                    <p style="color: var(--text-light);">Define your product category with base price and weight. This is the foundation.</p>
                </div>
            </div>

            <div style="display: flex; gap: 1rem;">
                <div style="flex-shrink: 0; width: 2.5rem; height: 2.5rem; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700;">2</div>
                <div>
                    <h4 style="margin-bottom: 0.5rem;">Build Attribute Hierarchy</h4>
                    <p style="color: var(--text-light);">Use the Hierarchy Editor to create your attribute tree. Start with categories, then add attributes and options.</p>
                </div>
            </div>

            <div style="display: flex; gap: 1rem;">
                <div style="flex-shrink: 0; width: 2.5rem; height: 2.5rem; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700;">3</div>
                <div>
                    <h4 style="margin-bottom: 0.5rem;">Set Pricing Rules</h4>
                    <p style="color: var(--text-light);">Define how each option affects the final price (fixed amount, percentage, or formula).</p>
                </div>
            </div>

            <div style="display: flex; gap: 1rem;">
                <div style="flex-shrink: 0; width: 2.5rem; height: 2.5rem; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700;">4</div>
                <div>
                    <h4 style="margin-bottom: 0.5rem;">Create Templates (Optional)</h4>
                    <p style="color: var(--text-light);">Build pre-configured templates for common configurations to speed up customer selection.</p>
                </div>
            </div>

            <div style="display: flex; gap: 1rem;">
                <div style="flex-shrink: 0; width: 2.5rem; height: 2.5rem; background: var(--success); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700;">âœ“</div>
                <div>
                    <h4 style="margin-bottom: 0.5rem;">Ready for Customers</h4>
                    <p style="color: var(--text-light);">Your product is now available for customer configuration, quote generation, and ordering!</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Best Practices -->
<div class="card">
    <h2 style="margin-bottom: 1.5rem;">ğŸ’¡ Best Practices</h2>
    
    <div style="display: grid; gap: 1rem;">
        <div style="padding: 1rem; background: #f0fdf4; border-radius: 0.5rem;">
            <strong style="color: #166534;">âœ“ Start Simple:</strong> Begin with basic categories and attributes, then expand as needed.
        </div>
        <div style="padding: 1rem; background: #f0fdf4; border-radius: 0.5rem;">
            <strong style="color: #166534;">âœ“ Use Clear Names:</strong> Make attribute names customer-friendly and self-explanatory.
        </div>
        <div style="padding: 1rem; background: #f0fdf4; border-radius: 0.5rem;">
            <strong style="color: #166534;">âœ“ Test Configurations:</strong> Create test configurations to verify pricing and logic.
        </div>
        <div style="padding: 1rem; background: #f0fdf4; border-radius: 0.5rem;">
            <strong style="color: #166534;">âœ“ Organize with Categories:</strong> Group related attributes together for better UX.
        </div>
        <div style="padding: 1rem; background: #f0fdf4; border-radius: 0.5rem;">
            <strong style="color: #166534;">âœ“ Use Sort Order:</strong> Control the display sequence for a logical flow.
        </div>
    </div>
</div>

<!-- Support -->
<div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none;">
    <h2 style="margin-bottom: 1rem; color: white;">ğŸ†˜ Need Help?</h2>
    <p style="margin-bottom: 1.5rem; opacity: 0.9;">
        If you have questions or need assistance, please refer to the full system documentation or contact your system administrator.
    </p>
    <div style="display: flex; gap: 1rem;">
        {{ button("ğŸ  Back to Dashboard", href="/api/v1/admin/dashboard", variant="primary", size="md", style="padding: 0.75rem 1.5rem; background: white; color: #667eea; border-radius: 0.5rem; text-decoration: none; font-weight: 600;") }}
    </div>
</div>

{% endblock %}

{% block extra_css %}
<style>
    a[href^="#"]:hover {
        background-color: #f1f5f9;
        border-color: var(--primary);
    }
    
    code {
        background: #f1f5f9;
        padding: 0.125rem 0.375rem;
        border-radius: 0.25rem;
        font-size: 0.875em;
    }
    
    h2 {
        color: var(--text);
        font-size: 1.5rem;
        font-weight: 700;
    }
    
    h3 {
        color: var(--text);
        font-size: 1.125rem;
        font-weight: 600;
    }
    
    h4 {
        color: var(--text);
        font-size: 1rem;
        font-weight: 600;
    }
</style>
{% endblock %}
